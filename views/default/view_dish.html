{{extend 'layout.html'}}

<h1>Name: {{=dish.name}}</h1>
<p><b>Description:</b> {{=dish.description}}</p>
<p><b>Price:</b> {{=dish.price}} </p>
<p><b>Ingredients:</b><div class="ingredients"></div></p>
<p><b>Vegetarian:</b> {{=dish.vegetarian}}</p>
<p><b>Vegan:</b> {{=dish.vegan}}</p>
<p><b>Gluten Free:</b> {{=dish.gluten_free}}</p>


<script>
$(document).ready(function(){
	var jsonstring = JSON.stringify({{=XML(dish.ingredients)}});
	var ingredientsArray = JSON.parse(jsonstring);
	for(var key in ingredientsArray) {
		if (ingredientsArray.hasOwnProperty(key)) {
    		console.log(key + " -> " + ingredientsArray[key]);
    		for(ingredient in ingredientsArray[key]){
    			$( ".ingredients" ).append(ingredientsArray[key][ingredient] + " ");
    			console.log(ingredient + " -> " + ingredientsArray[key][ingredient]);
    		}$( ".ingredients" ).append("<br>");    		
  		}
	}
});

</script>

